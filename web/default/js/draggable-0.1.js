!function(i){function t(){this._init.apply(this,arguments)}t.prototype.oninit=function(){},t.prototype.events=function(){},t.prototype.onmousedown=function(){this.ptr.css({position:"absolute"})},t.prototype.onmousemove=function(t,o,e){this.ptr.css({left:o,top:e})},t.prototype.onmouseup=function(){},t.prototype.isDefault={drag:!1,clicked:!1,toclick:!0,mouseup:!1},t.prototype._init=function(){if(0<arguments.length){this.ptr=i(arguments[0]),this.outer=i(".draggable-outer"),this.is={},i.extend(this.is,this.isDefault);var t=this.ptr.offset();this.d={left:t.left,top:t.top,width:this.ptr.width(),height:this.ptr.height()},this.oninit.apply(this,arguments),this._events()}},t.prototype._getPageCoords=function(t){return t.targetTouches&&t.targetTouches[0]?{x:t.targetTouches[0].pageX,y:t.targetTouches[0].pageY}:{x:t.pageX,y:t.pageY}},t.prototype._bindEvent=function(t,o,e){this.supportTouches_?t.get(0).addEventListener(this.events_[o],e,!1):t.bind(this.events_[o],e)},t.prototype._events=function(){var o=this;this.supportTouches_="ontouchend"in document,this.events_={click:this.supportTouches_?"touchstart":"click",down:this.supportTouches_?"touchstart":"mousedown",move:this.supportTouches_?"touchmove":"mousemove",up:this.supportTouches_?"touchend":"mouseup"},this._bindEvent(i(document),"move",function(t){o.is.drag&&(t.stopPropagation(),t.preventDefault(),o._mousemove(t))}),this._bindEvent(i(document),"down",function(t){o.is.drag&&(t.stopPropagation(),t.preventDefault())}),this._bindEvent(i(document),"up",function(t){o._mouseup(t)}),this._bindEvent(this.ptr,"down",function(t){return o._mousedown(t),!1}),this._bindEvent(this.ptr,"up",function(t){o._mouseup(t)}),this.ptr.find("a").click(function(){if(o.is.clicked=!0,!o.is.toclick)return!(o.is.toclick=!0)}).mousedown(function(t){return o._mousedown(t),!1}),this.events()},t.prototype._mousedown=function(t){this.is.drag=!0,this.is.clicked=!1,this.is.mouseup=!1;var o=this.ptr.offset(),e=this._getPageCoords(t);this.cx=e.x-o.left,this.cy=e.y-o.top,i.extend(this.d,{left:o.left,top:o.top,width:this.ptr.width(),height:this.ptr.height()}),this.outer&&this.outer.get(0)&&this.outer.css({height:Math.max(this.outer.height(),i(document.body).height()),overflow:"hidden"}),this.onmousedown(t)},t.prototype._mousemove=function(t){this.is.toclick=!1;var o=this._getPageCoords(t);this.onmousemove(t,o.x-this.cx,o.y-this.cy)},t.prototype._mouseup=function(t){this.is.drag&&(this.is.drag=!1,this.outer&&this.outer.get(0)&&(i.browser.mozilla?this.outer.css({overflow:"hidden"}):this.outer.css({overflow:"visible"}),i.browser.msie&&"6.0"==i.browser.version?this.outer.css({height:"100%"}):this.outer.css({height:"auto"})),this.onmouseup(t))},window.Draggable=t}(jQuery);