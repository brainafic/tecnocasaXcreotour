String.prototype.replaceAll=function(a,t){return this.split(a).join(t)};var isSafari=/constructor/i.test(window.HTMLElement)||"[object SafariRemoteNotification]"===(!window.safari||"undefined"!=typeof safari&&safari.pushNotification).toString();1==isSafari&&$(window).bind("pageshow",function(a){a.originalEvent.persisted&&window.location.reload()});var isMobile=!1;(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(navigator.userAgent.substr(0,4)))&&(isMobile=!0);var ua=navigator.userAgent.toLowerCase(),isAndroid=-1<ua.indexOf("android"),iOS=/(iPhone|iPod)/.test(navigator.userAgent);function number_format(a,t,i,e){a=(a+"").replace(/[^0-9+\-Ee.]/g,"");var o,n,r,l=isFinite(+a)?+a:0,c=isFinite(+t)?Math.abs(t):0,s=void 0===e?",":e,d=void 0===i?".":i,m="";return 3<(m=(c?(o=l,n=c,r=Math.pow(10,n),""+Math.round(o*r)/r):""+Math.round(l)).split("."))[0].length&&(m[0]=m[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,s)),(m[1]||"").length<c&&(m[1]=m[1]||"",m[1]+=new Array(c-m[1].length+1).join("0")),m.join(d)}function loadScriptMapDettaglio(){var a="it";0<$("#lang").length&&(a=$("#lang").val()),$.getScript("https://maps.googleapis.com/maps/api/js?v=3.25&signed_in=false&libraries=places&language="+a+"&key="+API_KEY,function(){var a=$("a[href='#Mappa']").attr("data-src2");$.getScript(a,function(){var a="idImmobile="+$("input[name=idImmobile]").val();$.ajax({type:"POST",url:"/ajax/getIndirizzoImmobile",data:a,cache:!1,success:function(a){var t=$.parseJSON(a),i={zoom:15,zoomCtrl:!0,positionPanel:google.maps.ControlPosition.LEFT_TOP,scrollMap:!1,disableDbClickZoom:!0,dragMap:!0},e=new $.MapsClass("schedaMappa"),o=t.indirizzo,n=t.lat,r=t.lng;google.maps.event.addDomListener(window,"load",e.CreateSimpleMap(n,r,o,i))}})})})}function printImmobile(){$("li.planimetrie").length?($("li.planimetrie a").tab("show"),setTimeout(function(){$("li.foto a").tab("show"),window.print()},500)):window.print()}if(isMobile&&(isAndroid||iOS)&&null==$.cookie("scaricaAppClose")&&"it"==nazione&&(isAndroid?$("#textMobile").text(aLang.scaricaGratisAndroid):iOS&&$("#textMobile").text(aLang.scaricaGratisIphone),$("#modalScaricaApp").css("display","block")),$("#modalScaricaApp").on("click","#scaricaApp",function(){if(iOS){var a=$(this).attr("linkapple");window.open(a)}else{a=$(this).attr("linkandroid");window.open(a)}var t=new Date;t.setTime(t.getTime()+108e5),$.cookie("scaricaAppClose",1,{path:"/",expires:t}),$("#modalScaricaApp").css("display","none")}),$("#modalScaricaApp").on("click","#closeScaricaApp",function(){var a=new Date;a.setTime(a.getTime()+108e5),$.cookie("scaricaAppClose",1,{path:"/",expires:a}),$("#modalScaricaApp").css("display","none")}),function(e){e.each(["show","hide"],function(a,t){var i=e.fn[t];e.fn[t]=function(){return this.trigger(t),i.apply(this,arguments)}})}(jQuery),0<$("#mapIndirizzo").length){var pac_input=document.getElementById("fc_indirizzo");!function(o){var i=o.addEventListener?o.addEventListener:o.attachEvent;function a(a,t){if("keydown"==a){var e=t;t=function(a){var t=0<$(".pac-item-selected").length;if(13==a.which&&!t){var i=$.Event("keydown",{keyCode:40,which:40});e.apply(o,[i])}e.apply(o,[a])}}i.apply(o,[a,t])}o.addEventListener?o.addEventListener=a:o.attachEvent&&(o.attachEvent=a)}(pac_input)}function loadScriptMapValutazione(t,a){var i="it";0<$("input[name=lang]").length&&(i=$("input[name=lang]").val()),$.getScript("https://maps.googleapis.com/maps/api/js?v=3.25&signed_in=false&libraries=places&language="+i+"&key="+a,function(){var a=t+"MapsClass.js";$.getScript(a,function(){if(document.addEventListener){var r=new google.maps.places.Autocomplete(pac_input,{types:["geocode"],componentRestrictions:{country:aLang.country}});0<$("#mapIndirizzo").length&&google.maps.event.addListener(r,"place_changed",function(){var a=r.getPlace();if(null!=a.geometry&&($(".error_indirizzo .tooltiptext").removeAttr("style"),$("#fc_indirizzo").removeClass("error"),$("#mapIndirizzo").attr("lat",a.geometry.location.lat()),$("#mapIndirizzo").attr("lng",a.geometry.location.lng()),setTimeout(function(){var a={zoom:15,zoomCtrl:!0,positionPanel:google.maps.ControlPosition.LEFT_TOP,scrollMap:!1,disableDbClickZoom:!0,dragMap:!0},t=new $.MapsClass("mapIndirizzo");$("#mapIndirizzo").css("height","400px");var i=$("#mapIndirizzo").attr("lat"),e=$("#mapIndirizzo").attr("lng"),o=$("input[name=settore]:checked").val(),n=$("#mapIndirizzo").attr("dataRete"),r=$("#mapIndirizzo").attr("dataNaz"),l=$("#fc_indirizzo").val();if(google.maps.event.addDomListener(window,"load",t.CreateSimpleMap(i,e,l,a)),""!=e&&""!=i){var c="longitudine="+e+"&latitudine="+i+"&rete="+n+"&settore="+o+"&indirizzo="+l+"&nazione="+r;$.ajax({type:"POST",url:"/ajax/getAgenzieValutazione",data:c,cache:!1,success:function(a){$("#contAgenziaValutazione").html(a)}})}},900),null!=$("#idAgenzia").val())){var t=$("input[name=settore]:checked").val(),i=$("#mapIndirizzo").attr("dataRete"),e=$("#mapIndirizzo").attr("dataNaz"),o=$("#fc_indirizzo").val(),n="longitudine="+a.geometry.location.lng()+"&latitudine="+a.geometry.location.lat()+"&rete="+i+"&settore="+t+"&indirizzo="+o+"&nazione="+e;$.ajax({type:"POST",url:"/ajax/getAgenzieValutazione",data:n,cache:!1,success:function(a){$("#contAgenziaValutazione").html(a)}})}})}else{document.getElementById("fc_indirizzo"),r=new google.maps.places.Autocomplete(pac_input,{types:["geocode"],componentRestrictions:{country:aLang.country}});0<$("#mapIndirizzo").length&&google.maps.event.attachEvent(r,"place_changed",function(){var a=r.getPlace();if("undefined"!=a.geometry&&($(".error_indirizzo .tooltiptext").removeAttr("style"),$("#fc_indirizzo").removeClass("error"),$("#mapIndirizzo").attr("lat",a.geometry.location.lat()),$("#mapIndirizzo").attr("lng",a.geometry.location.lng()),null!=$("#idAgenzia").val())){var t=$("input[name=settore]:checked").val(),i=$("#mapIndirizzo").attr("dataRete"),e=$("#mapIndirizzo").attr("dataNaz"),o=$("#fc_indirizzo").val(),n="longitudine="+a.geometry.location.lng()+"&latitudine="+a.geometry.location.lat()+"&rete="+i+"&settore="+t+"&indirizzo="+o+"&nazione="+e;$.ajax({type:"POST",url:"/ajax/getAgenzieValutazione",data:n,cache:!1,success:function(a){$("#contAgenziaValutazione").html(a)}})}})}})})}function validatorExt(r){jQuery.validator.addMethod("requiredMappa",function(i,a){return!(0<$(".pac-container .pac-item").length)||($.each($(".pac-container .pac-item"),function(a,t){if($(t).text().toLowerCase().replace(/\s/g,"")==i.toLowerCase().replace(/\s/g,""))return!0}),!1)},"Dirección no válida. Seleccione una dirección de la lista"),jQuery.validator.addMethod("isMailOrTel",function(a,t){var i=$(r+" input[name=email]").val().trim(),e="";0<$(r+" input[name=telefono]").length&&(e=$(r+" input[name=telefono]").val());var o=[];if(""!=e&&null!=e&&""!=i&&null!=i){var n=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:[a-zA-Z0-9](?:\.[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(\.[a-zA-Z0-9]{2,6}))$/i;i.match(n)?o.push(1):o.push(0)}else if(""!=e&&null!=e)o.push(1);else if(""!=i&&null!=i){n=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:[a-zA-Z0-9](?:\.[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(\.[a-zA-Z0-9]{2,6}))$/i;i.match(n)?o.push(1):o.push(3)}else o.push(0);return-1!=$.inArray(1,o)},aLang.ismailortel),jQuery.validator.addMethod("isNomeOCognome",function(a,t){var i=$(r+" input[name=nome]").val(),e=$(r+" input[name=cognome]").val(),o=[];return""!=i&&null!=i?o.push(1):o.push(0),""!=e&&null!=e?o.push(1):o.push(0),-1!=$.inArray(1,o)},aLang.isnomeocognome),$.validator.addMethod("contieneLettereENumeri",function(a,t){return this.optional(t)||a.match(/[a-zA-Z]/)&&a.match(/[0-9]/)},aLang.validaLettereENumeri)}function validateForm(i){validatorExt(i);var e=0,o=0;$(".tooltiptext").attr("style","visibility:hidden;opacity: 0;"),$(i).validate({ignore:[],focusInvalid:!1,errorPlacement:function(a,t){return t.attr("name")&&("email"==t.attr("name")&&a.insertAfter("#email"),"motivazione"==t.attr("name")?$(i+" input[name="+t.attr("name")+"]").parent().parent().attr("style","color:red"):"tipologia"==t.attr("name")?($(i+" label[for="+t.attr("id")+"]").attr("style","color:red"),$(i+" select[name="+t.attr("name")+"]").parent().find("button").attr("style","border: 1px solid red;")):"idAgenzia"==t.attr("name")?$("#errorAgenzia").show():$(i+" label[for="+t.attr("id")+"]").attr("style","color:red")),"form_contattiValuta"==$(i).attr("id")&&(t.attr("name")==$("input.error:first").attr("name")&&0==o?($("html, body").animate({scrollTop:$("input.error:first").offset().top-130},500),t.parent().find(".tooltiptext").html(a.text()),t.parent().find(".tooltiptext").attr("style","visibility:visible;opacity: 1;"),e=1):t.attr("name")==$("select.error:first").attr("name")&&0==e&&($("html, body").animate({scrollTop:$("select.error:first").offset().top-130},500),t.parent().parent().find(".tooltiptext").html(a.text()),t.parent().parent().find(".tooltiptext").attr("style","visibility:visible;opacity: 1;"),o=e=1)),!0},rules:{nome:{required:!0},cognome:{required:!0},email:{isMailOrTel:!0},nomeDest:{required:!0},nomeMittente:{required:!0},emailDest:{required:!0,email:!0},emailMittente:{required:!0,email:!0},telefono:{isMailOrTel:!0,numberTelefono:!0},caricaCV:{required:!0},indirizzo:{required:!0,requiredMappa:!0},tipologia:{required:!0,nonZero:!0},motivazione:{required:!0},idAgenzia:{required:!0},privacy_imm:{required:!0}},messages:{email:{verifyemail:aLang.verifyemail},indirizzo:{required:"Introduce una dirección correcta y selecciónala en la lista"}}}),$(i).on("focusout",".bootstrap-select",function(){"border: 1px solid red;"==$(this).parent().find("button").attr("style")&&$(this).find("select").valid()&&($(this).parent().find("button").css("border","1px solid #ccc"),$(this).parent().find("button").parent().parent().parent().find("label").css("color","#5a5a5c"),$(this).parent().find(".tooltiptext").attr("style","visibility:hidden;opacity: 0;"),o=e=0)}),$(i).on("change","input",function(){var a=$(this).attr("name");"telefono"==a||"email"==a?$(this).valid()&&($(i+" input[name=telefono]").removeClass("error"),$(i+" input[name=email]").removeClass("error"),$(i+" input[name=telefono]").parent().find(".tooltiptext").removeAttr("style"),$(i+" input[name=email]").parent().find(".tooltiptext").removeAttr("style"),$(this).parent().find(".tooltiptext").attr("style","visibility:hidden;opacity: 0;transition: opacity 0;"),e=0):"motivazione"==a?$(this).valid()?($(this).parent().parent().removeAttr("style"),e=0):$(this).parent().parent().attr("style","color:red"):"idAgenzia"==$(this).attr("name")?$(this).valid()&&($("#errorAgenzia").hide(),e=0):"indirizzo"==$(this).attr("name")?$(this).valid()&&($("#error_indirizzo .tooltiptext").attr("style","visibility:hidden;opacity: 0;transition: opacity 0;"),$("#fc_indirizzo").removeClass("error"),e=0):$(this).valid()&&($(this).parent().find(".tooltiptext").attr("style","visibility:hidden;opacity: 0;transition: opacity 0;"),e=0)})}function validateFormProfilo(a){validatorExt(a),$(a).validate({ignore:[],focusInvalid:!0,rules:{password:{minlength:8,contieneLettereENumeri:!0},VerificaPassword:{equalTo:"#password"}}})}function sliderInput(a){if(null!=$(".tab-pane.row.active "+a).attr("name")){var t=Math.round($(a).attr("data-min")),i=Math.round($(a).attr("data-max"));$(a).attr("data-step");if($(".tab-pane.row.active "+a).slider({range:!1,from:t,to:i,step:10,skin:"round_plastic"}),""!=$(".tab-pane.row.active "+a).attr("data-session")&&null!=$(a).attr("data-session")){var e=$(".tab-pane.row.active "+a).attr("data-session").split(";"),o=Math.round(e[0]),n=Math.round(e[1]);$(".tab-pane.row.active "+a).slider("value",o,n)}}}function validateFormLavoraConNoi(t){validatorExt(t),$(t).validate({ignore:[],focusInvalid:!1,errorPlacement:function(a,t){return t.attr("name")&&("email"==t.attr("name")&&a.insertAfter("#email"),"motivazione"==t.attr("name")?$("input[name="+t.attr("name")+"]").parent().parent().attr("style","color:red"):"tipologia"==t.attr("name")?($("label[for="+t.attr("id")+"]").attr("style","color:red"),$("select[name="+t.attr("name")+"]").parent().find("button").attr("style","border: 1px solid red;")):"provinciaLav"==t.attr("name")?$("select[name="+t.attr("name")+"]").parent().find("button").attr("style","border: 1px solid red;"):$("label[for="+t.attr("id")+"]").attr("style","color:red")),!0},rules:{nome:{isNomeOCognome:!0},cognome:{isNomeOCognome:!0},email:{required:!0},telefono:{required:!0,numberTelefono:!0},caricaCV:{required:!0},tipologia:{required:!0},motivazione:{required:!0},provinciaLav:{required:!0},privacy_imm:{required:!0}},messages:{email:{verifyemail:aLang.verifyemail}}}),$(t).on("focusout",".bootstrap-select",function(){"border: 1px solid red;"==$(this).parent().find("button").attr("style")&&$(this).find("select").valid()&&($(this).parent().find("button").css("border","1px solid #ccc"),$(this).parent().find("button").parent().parent().parent().find("label").css("color","#5a5a5c"))}),$(t).on("change","input",function(){var a=$(this).attr("id");"fc_nome"==a||"fc_cognome"==a?$(this).valid()&&($("#fc_nome").removeClass("error"),$("#fc_cognome").removeClass("error")):"fc_telefono"!=a&&"fc_email"!=a||$(this).valid()&&($("#fc_telefono").removeClass("error"),$("#fc_email").removeClass("error")),"labelfc_motivazioneVendita"==a||"labelfc_motivazioneAffitto"==a?$(this).valid()?$(this).parent().parent().removeAttr("style"):$(this).parent().parent().attr("style","color:red"):"color:red"==$("label[for="+a+"]").attr("style")&&($(this).valid()?($(this).css("border","1px solid #ccc"),$(this).parent().parent().find("label").css("color","#5a5a5c"),0<$(t+" #email-error").length&&$(t+" #email-error").remove()):($(this).css("border","2px solid red"),$(this).parent().parent().find("label").css("color","red")))})}function validateFormCercoCasa(t){validatorExt(t),$(t).validate({ignore:[],focusInvalid:!1,errorPlacement:function(a,t){return t.attr("name")&&("email"==t.attr("name")&&a.insertAfter("#email"),"motivazione"==t.attr("name")?$("input[name="+t.attr("name")+"]").parent().parent().attr("style","color:red"):"privacy"==t.attr("name")?$("input[name="+t.attr("name")+"]").parent().parent().attr("style","color:red"):$("label[for="+t.attr("id")+"]").attr("style","color:red")),!0},rules:{nome:{required:!0},cognome:{required:!0},email:{isMailOrTel:!0},telefono:{isMailOrTel:!0,numberTelefono:!0},caricaCV:{required:!0},motivazione:{required:!0},privacy:{required:!0}},messages:{email:{verifyemail:aLang.verifyemail}}}),$(t).on("focusout",".bootstrap-select",function(){"border: 1px solid red;"==$(this).parent().find("button").attr("style")&&$(this).find("select").valid()&&($(this).parent().find("button").css("border","1px solid #ccc"),$(this).parent().find("button").parent().parent().parent().find("label").css("color","#5a5a5c"))}),$(t).on("change","input",function(){var a=$(this).attr("id");"fc_telefono"==a||"fc_email"==a?$(this).valid()&&($("#fc_telefono").removeClass("error"),$("#fc_email").removeClass("error")):"labelfc_motivazioneVendita"==a||"labelfc_motivazioneAffitto"==a?$(this).valid()?$(this).parent().parent().removeAttr("style"):$(this).parent().parent().attr("style","color:red"):"labelfc_acconsento"==a||"labelfc_noacconsento"==a?$(this).valid()?$(this).parent().parent().removeAttr("style"):$(this).parent().parent().attr("style","color:red"):"color:red"==$("label[for="+a+"]").attr("style")&&($(this).valid()?($(this).css("border","1px solid #ccc"),$(this).parent().parent().find("label").css("color","#5a5a5c"),0<$(t+" #email-error").length&&$(t+" #email-error").remove()):($(this).css("border","2px solid red"),$(this).parent().parent().find("label").css("color","red")))})}function validateFormRichiestaConsulenza(t){$(t).validate({ignore:[],focusInvalid:!1,errorPlacement:function(a,t){return t.attr("name")&&$("label[for="+t.attr("id")+"]").attr("style","color:red"),!0},rules:{intestatarioNome:{required:!0},intestatarioCognome:{required:!0},contattoTelefono:{number:!0,required:!0},contattoEmail:{email:!0,required:!0},informativaPrivacy:{required:!0}},messages:{contattoTelefono:{number:aLang.number},contattoEmail:{email:aLang.verifyemail}}}),$(t).on("focusout",".bootstrap-select",function(){"border: 1px solid red;"==$(this).parent().find("button").attr("style")&&$(this).find("select").valid()&&($(this).parent().find("button").css("border","1px solid #ccc"),$(this).parent().find("button").parent().parent().parent().find("label").css("color","#5a5a5c"))}),$(t).on("change","input",function(){var a=$(this).attr("id");"intestatarioNome"==a||"intestatarioCognome"==a?$(this).valid()&&($(".intestatarioNome").removeClass("error"),$(".intestatarioCognome").removeClass("error")):"contattoTelefono"!=a&&"fc_email"!=a||$(this).valid()&&($(".contattoTelefono").removeClass("error"),$(".contattoEmail").removeClass("error")),"color:red"==$("label[for="+a+"]").attr("style")&&($(this).valid()?($(this).css("border","1px solid #ccc"),$(this).parent().parent().find("label").css("color","#5a5a5c"),0<$(t+" #email-error").length&&$(t+" #email-error").remove()):($(this).css("border","2px solid red"),$(this).parent().parent().find("label").css("color","red")))})}function setEtichettaPulsantePiuFiltri(a){0!=a.data("filtri")?a.find(".badge").html(a.data("filtri")):a.find(".badge").html(""),a.hasClass("aperto")?($(".ricercaButtonContainer").hide(),a.find(".fa").addClass("fa-angle-up"),a.find(".fa").removeClass("fa-angle-down"),a.find(".testoFiltro").html(aLang.riduciFiltri)):($(".ricercaButtonContainer").show(),a.find(".fa").removeClass("fa-angle-up"),a.find(".fa").addClass("fa-angle-down"),a.find(".testoFiltro").html(aLang.piuFiltri)),$(".badgeFiltriMobile").html(a.data("filtri"))}function conteggioFiltri(){nCountFiltri=0,$.each($("input.listaImmobiliAjax, select.listaImmobiliAjax"),function(a,t){"text"==$(this).attr("type")||"number"==$(this).attr("type")?""!=$(this).val().trim()&&nCountFiltri++:"checkbox"==$(this).attr("type")?$(this).is(":checked")&&nCountFiltri++:"select"==$(this).prop("tagName").toLowerCase()&&$(this).find("option").each(function(){$(this).is(":selected")&&0!=$(this).val()&&nCountFiltri++})}),pulsante=$(".piuFiltri"),pulsante.attr("data-filtri",nCountFiltri),pulsante.data("filtri",nCountFiltri),setEtichettaPulsantePiuFiltri(pulsante)}function eseguiRicerca(a){$.ajax({type:"post",url:baseUrlLingua+"ajax/ricercaImmobiliParametri",dataType:"html",data:a,success:function(a){""==a?$(".immobiliListaAnnunci").html("nulla!!"):($(".immobiliListaAnnunci").html(a),setEtichettaPulsantePiuFiltri($(".piuFiltri")))}})}function salvaRicercaRecente(a){0!=utenteLogin&&$.ajax({type:"post",url:baseUrlLingua+"ajax/salvaRicercaRecente",data:a,success:function(a){}})}function setPercentualeProfilo(a){var t=$("#completa-profilo-widget");t.circliful({animationStep:5,foregroundColor:"#00984b",foregroundBorderWidth:5,backgroundBorderWidth:15,percent:a,icon:"f007",iconSize:50,iconPosition:"middle"}),100==a&&t.closest(".sidebar-listato").addClass("completato")}function getPercentualeProfilo(){$.ajax({url:baseUrlLingua+areaPrivataUrl+"/calcolaPercentualeProfilo",success:function(a){setPercentualeProfilo(a)}})}function initialize(){if($("#myModal").on("shown.bs.modal",function(){$("#myInput").focus()}),$("#myCarousel").on("slide.bs.carousel",function(){}),$("#cookie").length&&(cookieControl=0,$(".accept-cookie").click(function(){0==cookieControl&&($.post("/ajax/setCookie"),$("#cookie").hide()),cookieControl=1})),0<$("#").length&&validateForm("#form_contatti"),0<$("#formModificaProfilo").length&&validateFormProfilo("#formModificaProfilo"),$("#form_contatti").on("click","#inviaFormContatti",function(){var r=$("#form_contatti").find(".loader");if($("#form_contatti").valid()){r.stop().fadeIn(300),$(this).prop("disabled",!0);var a=new FormData($("#form_contatti")[0]);null!=$("#caricaCV").val()&&a.append("caricaCV",$("input[type=file][id='caricaCV']")[0].files[0]),$.ajax({type:"POST",url:"/ajax/setManifestazione/",data:a,cache:!1,mimeType:"multipart/form-data",contentType:!1,processData:!1,success:function(a){r.stop().fadeOut(300);var t=a.split("|"),i=t[1],e=$("input[name=lang]").val();if("OK"==i)if("es"==e){var o=t[0];location.href=$("#inviaForm").attr("data-conferma")+"/"+o+"/cmc?form=cs"}else{var n=$("#infoNascondi .immobilePrezzo").text()||$("#formContattiDestra .immobilePrezzo").text();n=n.replace(/[^0-9]/g,""),location.href=$("#inviaForm").attr("data-conferma")+"?form=cs&idimmobile="+$("#idImmobile").val()+"&prezzo="+n}}})}}),0<$("#form_contattiValuta").length&&(validateForm("#form_contattiValuta"),loadScriptMapValutazione(urlScriptDefault,API_KEY),$("#form_contattiValuta").on("change","input[name=settore]",function(){var a="idTip="+$("input[name=settore]:checked").val();$.ajax({type:"POST",url:"/ajax/getTipologieSettore",data:a,cache:!1,success:function(a){$("#contAmbitoChange").html(a),$("#labelfc_tipologia").selectpicker("refresh")}})})),$("#form_contattiValuta").on("click","#inviaFormContatti",function(){if($("#form_contattiValuta").valid()){$(this).prop("disabled",!0);var a=$("#form_contattiValuta").serialize();$.ajax({type:"POST",url:"/ajax/invia-valutazione/",data:a,cache:!1,success:function(a){var t=$.parseJSON(a).response;201==t.status_code&&(location.href=$("#inviaForm").attr("data-conferma")+"/"+t.id+"/cmc?form=vi")}})}}),$(document).on("change","input[type='file']",function(){var a=$(this).val(),t=a.lastIndexOf("."),i=a.length,e=a.substring(t+1,i),o=($(this).attr("id"),$(this)[0].files[0].size),n=Math.round(parseInt(o)/1024);5e3<n?(alert("File troppo grande "+n+"kb! Caricare un altro file con dimensione minore di 5000 kb.",{modal:!0}),$(this).val("")):"pdf"!=e&&"doc"!=e&&"docx"!=e&&(alert("Formato file non supportato! Caricare il file in pdf o doc.",{modal:!0}),$(this).val(""))}),0<$("#formContattiLavoraConNoi").length&&validateFormLavoraConNoi("#formContattiLavoraConNoi"),null!=$("#prezzoAffitto").attr("name")&&sliderInput("#prezzoAffitto"),null!=$("#prezzoVendita").attr("name")&&sliderInput("#prezzoVendita"),null!=$("#superficieVendita").attr("name")&&sliderInput("#superficieVendita"),null!=$("#superficieAffitto").attr("name")&&sliderInput("#superficieAffitto"),$('a[data-toggle="tab"]').on("shown.bs.tab",function(a){null!=$("#prezzoAffitto").attr("name")&&sliderInput("#prezzoAffitto"),null!=$("#prezzoVendita").attr("name")&&sliderInput("#prezzoVendita"),null!=$("#superficieVendita").attr("name")&&sliderInput("#superficieVendita"),null!=$("#superficieAffitto").attr("name")&&sliderInput("#superficieAffitto")}),0<$("#formContattiCercoCasa").length&&validateFormCercoCasa("#formContattiCercoCasa"),$("#formContattiCercoCasa").on("click","#inviaFormContatti",function(){if($("#formContattiCercoCasa").valid()){$(this).prop("disabled",!0);var a=new FormData($("#formContattiCercoCasa")[0]);$.ajax({type:"POST",url:"/ajax/setManifestazione/",data:a,cache:!1,mimeType:"multipart/form-data",contentType:!1,processData:!1,success:function(a){var t=a.split("|"),i=t[1];t[0],$("input[name=lang]").val();"OK"==i&&(location.href=$("#inviaForm").attr("data-conferma")+"?form=cs")}})}}),$(".formGenerico").on("change","#labelfc_selectFormHome",function(){var a=$(this).val();"contattoSemplice"==a?location.href="/contatti":"cercoCasa"==a?location.href="/contatti#cercoCasa":"vendoCasa"==a?location.href="/valuta-il-tuo-immobile":"invioCV"==a&&(location.href="/chi-siamo")}),$("#formAggiornaManifestazine").on("click","#aggiornaManifestazione",function(){var a=$("#formAggiornaManifestazine").serialize();$.ajax({type:"POST",url:"/ajax/aggiornaInformativa/",data:a,cache:!1,success:function(a){"ko"!=a&&$("#contattiConferma .containerForm").html(a)}})}),$('[data-toggle="tooltip"]').tooltip(),0<$(".container.scheda").length){var a=$(".formContattiImmobile input[name=idImmobile]").val(),t=$(".formContattiImmobile input[name=idAgenzia]").val(),i=new Date,e=(i.getDate()<10?"0":"")+i.getDate()+"/"+(i.getMonth()<10?"0":"")+(i.getMonth()+1)+"/"+i.getFullYear()+" "+i.getHours()+":"+(i.getMinutes()<10?"0":"")+i.getMinutes()+":"+(i.getSeconds()<10?"0":"")+i.getSeconds();if(null!=$.cookie("ultimi_imm_visti_"+t))var o=JSON.parse($.cookie("ultimi_imm_visti_"+t));else o={immobili:[],cantieri:[]};var n=a.split("-"),r=n[n.length-1];if("IDC"==n[0]){o.cantieri=$.grep(o.cantieri,function(a,t){return o.cantieri[t].id==r&&(o.cantieri[t].data=e),o.cantieri[t].id!=r});var l=$.map(o.cantieri,function(a,t){return t}).length;o.cantieri[l]={id:r,data:e}}else{o.immobili=$.grep(o.immobili,function(a,t){return o.immobili[t].id==r&&(o.immobili[t].data=e),o.immobili[t].id!=r});l=$.map(o.immobili,function(a,t){return t}).length;o.immobili[l]={id:r,data:e}}}if(0<$(".scheda #form_contattiImmobile").length&&(validateForm("#form_contattiImmobile"),$("#form_contattiImmobile").on("click",".inviaFormContatti",function(){if($("#form_contattiImmobile").valid()){$("#form_contattiImmobile").find(".loader").stop().fadeIn(300),$(this).prop("disabled",!0);var a=$("#form_contattiImmobile").serialize();$.ajax({type:"POST",url:"/ajax/invia-manifestazione-specifica/",data:a,cache:!1,success:function(a){var t=$.parseJSON(a).response;201==t.status_code&&(location.href=$("#inviaForm").attr("data-conferma")+"/"+t.id+"/cmc?form=cs")}})}})),($("#form_contattiImmobileModal").length||$("#GoToForm").length)&&$("#form_contattiImmobileModal").on("click",".inviaFormContatti",function(){if(validateForm("#form_contattiImmobileModal"),$("#form_contattiImmobileModal").valid()){$(this).prop("disabled",!0);var a=$("#form_contattiImmobileModal").serialize();$.ajax({type:"POST",url:"/ajax/invia-manifestazione-specifica/",data:a,cache:!1,success:function(a){var t=$.parseJSON(a).response;201==t.status_code&&(location.href=$("#inviaFormModale").attr("data-conferma")+"/"+t.id+"/cmc?form=cs")}})}}),0<$("#form_contattiImmobileInviaAmico").length&&($("#form_contattiImmobileInviaAmico").on("click",".inviaFormContatti",function(){validateForm("#form_contattiImmobileInviaAmico"),$("#form_contattiImmobileInviaAmico").valid()&&($(this).prop("disabled",!0),$(this).attr("disabled",!0),$.ajax({type:"POST",url:"/ajax/captchaCheck",data:{captcha:$("#form_contattiImmobileInviaAmico [name=captcha]").val()},success:function(a){if(0==a)return $("#form_contattiImmobileInviaAmico [name=captcha]").removeClass("valid"),$("#form_contattiImmobileInviaAmico [name=captcha]").addClass("error"),$("#form_contattiImmobileInviaAmico .inviaFormContatti").attr("disabled",!1),!1;var t=$("#form_contattiImmobileInviaAmico").serializeArray();t.push({name:"URLRicerca",value:$(".breadcrumb a").last().attr("href")}),$.ajax({type:"POST",url:"/ajax/sendToFriend/",data:t,cache:!1,success:function(a){"true"!=a?$(".fullRed").show():($(".formContattiInviaAmicoClass").hide(),$(".fullGreen").show())}})}}))}),$("#formContattiInviaAmico").on("hidden.bs.modal",function(){$(".fullRed").hide(),$(".fullGreen").hide(),$(".formContattiInviaAmicoClass").show(),$("#form_contattiImmobileInviaAmico")[0].reset(),nameToReplace="#Name",$("#form_contattiImmobileInviaAmico .inviaFormContatti").prop("disabled",!1)})),0<$(".footerContatti #form_contattiImmobileFooter").length&&$("#form_contattiImmobileFooter").on("click","#inviaFormContattiFooter",function(){var a=$("#form_contattiImmobileFooter");if(validateForm("#form_contattiImmobileFooter"),$("#form_contattiImmobileFooter").valid()){a.find(".loader").stop().fadeIn(300),$(this).prop("disabled",!0);var t=a.serialize();$.ajax({type:"POST",url:"/ajax/invia-manifestazione-specifica/",data:t,cache:!1,success:function(a){var t=$.parseJSON(a).response;201==t.status_code&&(location.href=$("#inviaForm").attr("data-conferma")+"/"+t.id+"/cmc?form=cs")}})}}),0<$(".form_richiestaConsulenza").length&&(validateFormRichiestaConsulenza(".form_richiestaConsulenza"),$(".calcoloMutuo").on("click",".inviaRichiestaConsulenza",function(a){var t=$(this).closest("form"),i=$(this).closest("form").attr("id");t.valid()&&($(this).prop("disabled",!0),$(".inviaRichiestaConsulenza span").toggle(),$.ajax({type:"POST",url:"/ajax/invia-consulenza-mutuo",data:t.serialize(),cache:!1,complete:function(){$(".inviaRichiestaConsulenza span").toggle(),$("#"+i+" .inviaRichiestaConsulenza").prop("disabled",!1)},success:function(a){"undefined"!=typeof ga&&ga("send","pageview","/obiettivi/form/mutuo/compilato/"),t[0].reset(),$("#"+i+" .input-group input").trigger("change"),201==$.parseJSON(a).response.status_code?($("html, body").animate({scrollTop:$(".anagraficaRichiestaConsulenza").offset().top-100},500),$(".esitoRichiestaConsulenza").collapse("show"),$(".anagraficaRichiestaConsulenza").collapse("hide"),window.setTimeout(function(){$(".hideRichiestaConsulenza").trigger("click")},15e3)):alert("Richiesta non inviata!")},error:function(a){alert(a)}}))})),0<$(".map_point").length){var c,s=!0,d=[],m={zoom:16,zoomCtrl:!0,positionPanel:google.maps.ControlPosition.LEFT_TOP,scrollMap:!1,disableDbClickZoom:!0,dragMap:s},p=new $.MapsClass("map_point"),u=$(".map_point").attr("indirizzo"),f=$(".map_point").attr("lat"),h=$(".map_point").attr("long");$("#usa_mappa").click(function(){var a=$(".map_point").attr("data-cartimg");s=$("#usa_mappa").is(":checked")?($("#ico_mappa").attr("src","/web/"+a+"img/icone/ico-mappa-attiva.png"),$("#ico_mappa").attr("title","Blocca mappa"),!0):($("#ico_mappa").attr("src","/web/"+a+"img/icone/ico-mappa-disattiva.png"),$("#ico_mappa").attr("title","Sblocca mappa"),!1);var t={zoom:16,zoomCtrl:!0,positionPanel:google.maps.ControlPosition.LEFT_TOP,scrollMap:!1,disableDbClickZoom:!0,dragMap:s};google.maps.event.addDomListener(window,"load",p.initializePoint(d,f,h,u,t,c))}),$(".map-legenda input").click(function(){var a=positionMap.top;$(".overlayMapPoint").css("top",a),$(".overlayMapPoint").fadeIn("slow");var i=[];$(this).is(":checked")?(d.push($(this).val()),$.each(d,function(a,t){if(!1===$("input[name='"+t+"']").is(":checked")){i.push(t)}}),$.each(i,function(a,t){-1<$.inArray(t,d)&&d.splice($.inArray(t,d),1)})):d.splice($.inArray($(this).val(),d),1),c=$(this).val(),google.maps.event.addDomListener(window,"load",p.initializePoint(d,f,h,u,m,c))}),$("#containerInputSearch").on("keyup","#SearchTo",function(){0<$("#errorMessagge").text().length&&($("#errorMessagge").html(""),$("#containerInputSearch").css("bottom","382px"))}),$(document).on("click","#buttonSearchTo",function(){google.maps.event.addDomListener(window,"load",p.initializePoint(d,f,h,u,m,c))}),$(".map-legenda").on("click","div",function(){var a=$(".map_point").attr("data-cartimg"),t=$(this).find("label").attr("rel");1==$(this).find("input").is(":checked")?$(this).find("img").attr("src","/web/"+a+"img/icone/ico_"+t+".png"):$(this).find("img").attr("src","/web/"+a+"img/icone/ico_"+t+"_off.png")}),$(".map-legenda div input").click(function(a){a.stopPropagation()}),$.each($(".map-legenda div label"),function(){var a=$(this).attr("for");$(this).removeAttr("for"),$(this).attr("rel",a)}),$(".map-legenda div").bind("click",function(){$(this).find("input").trigger("click")})}if($("#inputMezzi").on("click","label",function(){if("checkbox"!=$(this).find("input").attr("type")){$.each($("label img"),function(){$(this).attr("src",$(this).attr("src").replace("_on.png","_off.png"))});$(this).find("img").attr("src");$(this).find("input").is(":checked")&&$(this).find("img").attr("src",$(this).find("img").attr("src").replace("_off.png","_on.png"))}}),0<$("#containerOLE").length){var v=$("#containerOLE").attr("data-stato");if("PRESENTE"==v){var g=$("#containerOLE").attr("data-ce"),b=$("#containerOLE").attr("data-e"),z=($("#containerOLE").attr("data-registro"),$("#containerOLE").attr("data-date"),g.split("-")),C=z[0],y=z[1],w=b.split("-"),x=w[0],k=w[1];""!=C&&$("#"+C+"_CE").html("<div class='row margin0'><div class='classeStriscia classeNero'>"+y+"</div><div class='col-md-1 classeAngoloNero'></div></div>"),""!=x&&$("#"+x+"_E").html("<div class='row margin0'><div class='classeStriscia classeNero'>"+k+"</div><div class='col-md-1 classeAngoloNero'></div></div>")}else"EXENTO"!=v&&"TRAMITACI"!=v||$("#imageOLE").addClass(v)}$(document).on("click","#ripristinaNascosto",function(){var a,i=$(this).attr("rel"),t=$(this).attr("sezione"),e=$("#countNascondi").attr("rel");a="imm"==t?"idImmobile="+i:"idCantiere="+i,$.ajax({type:"POST",async:!1,url:baseUrlLingua+areaPrivataUrl+"/ajax/ripristinaNascondi",data:a,success:function(a){if("ok"==a){var t=e-1;$("#countNascondi").html("( "+t+" )"),$("#countNascondi").attr("rel",t),$("#contRipr"+i).fadeOut("slow"),0==t&&($(".ContainerUltimiVisti").hide("slow"),$("<h4 style='text-align:center'>Nessuna immobile nascosto.</h4>").insertBefore(".ContainerUltimiVisti"))}}})}),$("#modalLogin").on("click","#ButtonCreaTuoAccount",function(a){a.preventDefault(),0<$("#modalLogin").length&&$("#modalLogin").modal("hide"),setTimeout(function(){$("#modalRegistrati").modal("show"),$("body").attr("style","overflow: hidden"),$("#modalRegistrati").css({"overflow-y":"auto"})},500)}),$(document).on("hidden.bs.modal","#modalRegistrati",function(){$("body").removeAttr("style")}),$(document).on("click",".nascondiCantNoLogato",function(a){var t=$(this).attr("rel");$("#idNascontiImm").val(""),$("#idNascontiCant").val(t),$("#modalLogin").modal("show")}),$(document).on("click",".nascondiImmNoLogato",function(a){var t=$(this).attr("rel");$("#idNascontiCant").val(""),$("#idNascontiImm").val(t),$("#modalLogin").modal("show")}),$("a[href='#Mappa']").on("shown.bs.tab",function(){0==$("#schedaMappa .gm-style").length&&loadScriptMapDettaglio()}),$(document).on("click",".setSessionContatti",function(a){$.cookie("setSessionContatti",1,{path:"/",expires:180})}),1==$.cookie("setSessionContatti")&&($.cookie("setSessionContatti",0,{path:"/",expires:180}),$("#form_contattiImmobileFooter")&&$("html, body").animate({scrollTop:$("#form_contattiImmobileFooter").offset().top},"slow")),$(document).on("click",".eliminaAnnuncioSalvato",function(a){a.preventDefault();var t,i=$(this).attr("rel");t=$(this).hasClass("cantiere")?"idCantiere="+i:"idImmobile="+i,$.ajax({type:"POST",async:!1,url:baseUrlLingua+areaPrivataUrl+"/ajax/eliminaListaDesideri",data:t,success:function(a){if("ok"==a){var t=$("#countSalvati").attr("rel");0<t?(t-=1,$("#countSalvati").attr("rel",t)):t=0,$(".immobiliDesideri[data-id="+i+"]").fadeOut("slow"),$("#countSalvati").html(t)}}})}),$("#divContattiSegnalazioni").on("shown.bs.modal",function(){validateForm("#divContattiSegnalazioni #formContattiSegnalazioni")}),$("#formContattiSegnalazioni").on("click",".inviaFormContatti",function(){if($("#formContattiSegnalazioni").valid()){$(this).prop("disabled",!0);var a=new FormData($("#formContattiSegnalazioni")[0]);$.ajax({type:"POST",url:"/ajax/salvasegnalazioni/",data:a,cache:!1,mimeType:"multipart/form-data",contentType:!1,processData:!1,success:function(a){$("#msgSegnalazioni").html(a),$("#msgSegnalazioni").show("slow"),setTimeout(function(){$("#formContattiSegnalazioni")[0].reset(),$("#formContattiSegnalazioni .inviaFormContatti").removeAttr("disabled"),$("#msgSegnalazioni").hide("slow")},3e3)}})}}),$("#print-pdf").on("click",function(){showOverlay(this)}),0<$(".carousel").length&&$(".carousel").swipe({swipe:function(a,t,i,e,o,n){"left"==t&&$(this).carousel("next"),"right"==t&&$(this).carousel("prev")},allowPageScroll:"vertical"}),$(".navbar-header").on("click",".backMobile",function(a){if(a.preventDefault(),0<$(".immobiliListaAnnunci").length){var t="/";window.location.href=t}else if(-1==document.referrer.indexOf("tecno")){t=$(".breadcrumb .comuneJSback").attr("href");window.location.href=t}else window.history.back()})}function showOverlay(){$("#print-pdf").addClass("loadingPdf"),window.addEventListener("focus",hideOverlay,!1)}function hideOverlay(){window.removeEventListener("focus",hideOverlay,!1),$("#print-pdf").removeClass("loadingPdf")}var hash=window.location.hash;function getQueryString(a,t){t||(t=window.location.href),a=a.replace(/[\[\]]/g,"\\$&");var i=new RegExp("[?&]"+a+"(=([^&#]*)|&|#|$)").exec(t);return i?i[2]?decodeURIComponent(i[2].replace(/\+/g," ")):"":null}function richiesteTemporaneeInviaForm(a,t){var n=[];$.each($("#"+a).validate().invalidElements().prevObject,function(a,t){var i={},e=$(t.element).attr("id"),o=t.message;i.IdInput=e,i.Message=o,n.push(i)}),n=JSON.stringify(n),0==$("#"+a).validate().invalidElements().prevObject.length&&(n=null);var i=$("#"+a).serialize()+"&aErrorValidate="+n+"&posizione="+t;$.ajax({type:"POST",url:"/ajax/setManrichiestatemp/",data:i,cache:!1,async:!0,success:function(a){}})}function espandiRichiestaConsulenza(){$(".showRichiestaConsulenza").parent().collapse("hide"),$(".hideRichiestaConsulenza").parent().collapse("show"),$(".anagraficaRichiestaConsulenza").collapse("show")}function bloccaModalSalvaRicerca(a){$("#salvaRicercaModal").modal("hide"),clearTimeout(a)}function addCaptcha(t,i,e,o){$.ajax({method:"POST",url:"/ajax/captchaGet",dataType:"json",data:{id:o},success:function(a){$(t).html($("<img>",{src:a.image,width:i,height:e})),$("input[name=captcha] ").attr("id-session",o)},fail:function(a){}})}hash&&"#_=_"==hash&&(window.location.hash=""),getQueryString("login-form")&&$("#modalLogin").modal("show"),getQueryString("fb-no-email")&&$("#modalLogin").modal("show").find("#errorLogin").html(aLang.facebookSenzaEmail).show(),$(document).ready(function(){if($(".containerPulsanti").on("click",".modaleImmobileContatti",function(a){a.preventDefault();var t=$(this).attr("data-id"),i=$(this).attr("data-sezione"),e=$(this).attr("data-agenzia"),o="id="+t+"&sezione="+i+"&agenzia="+e;$.ajax({type:"POST",url:"/ajax/modalContattiListato",data:o,cache:!1,success:function(a){$(a).insertAfter("#contRow"+t),validateForm("#form_contattiImmobile"),$("#myModalContattiListato"+t).modal("show"),$(".myModal").on("shown.bs.modal",function(){var t=$(this).attr("id");validateForm("#"+t+" #form_contattiImmobile"),$(".immobiliListaAnnunci, .cantieriLista").on("click","#"+t+" #form_contattiImmobile .inviaFormContatti",function(){if($("#"+t+" #form_contattiImmobile").valid()){$(this).prop("disabled",!0);var a=$("#"+t+" #form_contattiImmobile").serialize();$.ajax({type:"POST",url:"/ajax/invia-manifestazione-specifica/",data:a,cache:!1,success:function(a){var t=$.parseJSON(a).response;201==t.status_code&&(location.href=$("#inviaForm").attr("data-conferma")+"/"+t.id+"/cmc?form=cs")}})}})}),$("#myModalContattiListato"+t).on("hidden.bs.modal",function(){$("#myModalContattiListato"+t).remove()})}})}),$("#refreshCaptcha").on("click",function(){addCaptcha(".captcha","150px","40px","")}),$("#sendToFriendButton").on("click",function(a){$("#formContattiInviaAmico").modal("show"),addCaptcha(".captcha","150px","40px","")}),$("#printButton").on("click",function(a){printImmobile()}),$("#GoToForm").length&&$("#GoToForm").on("click",function(){$("#formContattiModale").modal("show")}),$(".showRichiestaConsulenza").click(function(){espandiRichiestaConsulenza()}),$(".hideRichiestaConsulenza").click(function(){$(".hideRichiestaConsulenza").parent().collapse("hide"),$(".showRichiestaConsulenza").parent().collapse("show"),$(".anagraficaRichiestaConsulenza").collapse("hide"),$(".esitoRichiestaConsulenza").collapse("hide");var a=$(this).closest("form").attr("id");window.setTimeout(function(){$("html, body").animate({scrollTop:$("#"+a).offset().top-100},250)},100)}),"1"==aLang.condizioniGeneraliHide&&($(".informativaPrivacyContainer").hide(),$("#informativaPrivacy").attr("checked","checked")),$("#ricercaPrezzoMin, #ricercaPrezzoMax").on("keyup",function(){var a=$(this).val().replace(/\./g,"");$(this).val(number_format(parseInt(a),0,",",".")),0==$(this).val()&&$(this).val(null),$(this).trigger("change")}),$("#ricercaLocaliMin, #ricercaLocaliMax").on("change",function(){0==$(this).val()&&$(this).val(null)}),$("input[name=telefono]").keypress(function(a){var t=(a=a||window.event).which?a.which:a.keyCode?a.keyCode:a.charCode;if(40==t||41==t||45==t||47==t||92==t)return!1}),$(".toolTipFire").hover(function(){toolTipEle=$(this).attr("data-target"),$("div[rel="+toolTipEle+"]").removeClass("tooltipRibasso")},function(){toolTipEle=$(this).attr("data-target"),$("div[rel="+toolTipEle+"]").addClass("tooltipRibasso")}),($(".schedaAnnuncio").length||$(".schedaCantiere").length)&&setTimeout(function(){$("#visiteImmobile").fadeIn(1e3),$("#visiteImmobile .arrow").on("click",function(){$(this).children("i").hasClass("fa-chevron-left")?($("#visiteImmobile .leftText").animate({width:"54px",padding:0},500),$("#visiteImmobile .leftText label").css("display","none")):$("#visiteImmobile .leftText").animate({width:"200px"},500,function(){$(this).css({padding:"18px 15px 0px 55px"}),$(this).children("label").css("display","block")}),$(this).children("i").toggleClass("fa-chevron-right"),$(this).children("i").toggleClass("fa-chevron-left")})},2e3),($(".schedaAnnuncio").length||$(".schedaCantiere").length)&&setTimeout(function(){$("#manifestazioniImmobile").fadeIn(1e3),$("#manifestazioniImmobile .arrow").on("click",function(){$(this).children("i").hasClass("fa-chevron-left")?($("#manifestazioniImmobile .leftText").animate({width:"54px",padding:0},500),$("#manifestazioniImmobile .leftText label").css("display","none")):$("#manifestazioniImmobile .leftText").animate({width:"200px"},500,function(){$(this).css({padding:"18px 15px 0px 55px"}),$(this).children("label").css("display","block")}),$(this).children("i").toggleClass("fa-chevron-right"),$(this).children("i").toggleClass("fa-chevron-left")})},3e3),setTimeout(function(){$("#visiteImmobile").fadeOut("fast")},8e3),setTimeout(function(){$("#manifestazioniImmobile").fadeOut("fast"),$("#manifestazioniImmobile_Info").length&&($(".schedaAnnuncioDescrizione").css({"background-color":"#FFF"}),$("#manifestazioniImmobile_Info").css({display:"block"}),$("#manifestazioniImmobile_Info").animate({top:"30px"},"slow"),$(".descrizioneFire ").animate({top:"20px"},"slow",function(){$(".schedaAnnuncioDescrizione").css({"background-color":""})}))},9500),($(".schedaAnnuncio").length||$(".schedaCantiere").length)&&!isMobile){var a=!1,t=!1;formDestra=$("#formContattiDestra"),h_full=formDestra.height(),$(window).on("resize",function(){$("#formContattiDestra").css({width:""})}),setTimeout(function(){$("#visiteImmobile").length&&($("#manifestazioniImmobile").css("top",parseInt($("#visiteImmobile").css("top"))+$("#visiteImmobile").height()+20),$(window).on("resize",function(){$("#manifestazioniImmobile").css("top",parseInt($("#visiteImmobile").css("top"))+$("#visiteImmobile").height()+20)})),$("#manifestazioniImmobile").length&&($("#contattaAgenzia").css("top",parseInt($("#manifestazioniImmobile").css("top"))+$("#manifestazioniImmobile").height()+20),$(window).on("resize",function(){$("#contattaAgenzia").css("top",parseInt($("#manifestazioniImmobile").css("top"))+$("#manifestazioniImmobile").height()+20)})),agenziaExplode=!0,$("#contattaAgenzia").fadeIn(1e3),$("#contattaAgenzia .arrow").on("click",function(){$(this).children("i").hasClass("fa-chevron-left")?($("#contattaAgenzia .leftText").animate({width:"0px",padding:0},500),$("#contattaAgenzia .leftText label").css("display","none")):$("#contattaAgenzia .leftText").animate({width:"145px"},500,function(){$(this).css({padding:"13px 15px 0 4px"}),$(this).children("label").css("display","block")}),$(this).children("i").toggleClass("fa-chevron-right"),$(this).children("i").toggleClass("fa-chevron-left")}),$("#contattaAgenzia .contattaAgenziaContainer, #contattaAgenzia .leftText").on("click",function(){$("#formContattiModale").modal("show"),$("#contattaAgenzia .arrow").children("i").hasClass("fa-chevron-left")&&$("#contattaAgenzia .arrow").trigger("click")})},4e3),$(document).on("scroll",function(){$(document).scrollTop()>h_full&&$(window).scrollTop()+$(window).height()<$("#inviaFormContattiFooter").offset().top?a?$(window).scrollTop()+$(window).height()>$("#inviaFormContattiFooter").offset().top?t||(t=!0,$("#formContattiDestra").fadeOut("300")):t&&(t=!1,$("#formContattiDestra").fadeIn("200")):(a=!0,h_full,$(window).height(),h=formDestra.children(".affiliato").outerHeight(!0)+formDestra.children(".immobilePrezzoBox").outerHeight(!0)+formDestra.children(".immobileDettagliBox").outerHeight(!0)+80,formDestra.children(".formContattiImmobile").hide(),formDestra.children(".affiliato").append('<div class="col-md-12 col-xs-12" style="padding-top:15px"><button type="button" id="GoToForm" class="btn btn-rete">'+$("#inviaFormContatti").text()+"</button></div>"),$("#GoToForm").on("click",function(){$("#formContattiModale").modal("show")}),formDestra.css({position:"fixed",width:formDestra.width(),height:h,top:$("#navbar").height(),left:formDestra.position().left}),$("#toolTip").show(),$("#toolTip").css({top:"auto","margin-left":"auto",position:"relative"}),$("#toolTip div").css({position:"initial",padding:"2px 0"}),$("#toolTip p").css({"text-align":"center"})):a&&($("#toolTip").removeProp("style"),$("#toolTip div").removeProp("style"),formDestra.css({position:"relative",top:"auto",left:"auto",height:h_full}),$("#GoToForm").length&&($("#formContattiDestra .formContattiImmobile").show(),$("#GoToForm").off("click"),$("#GoToForm").parent().remove()),a=!1)})}if(initialize(),"#cercoCasa"===location.hash&&0!=$("#labelfc_selectForm").length){$("#labelfc_selectForm option[value='cercoCasa']").prop("selected",!0);$.ajax({type:"POST",url:"/src/App/default/controllers/ajax/getForm.php",data:"sSezioneForm=cercoCasa",cache:!1,success:function(a){$("#schedaContatto").html(a),initialize()}}).done(function(){$.each($("select"),function(){$(this).selectpicker("refresh")})})}$("#contatti").on("change","#labelfc_selectForm",function(){var a="sSezioneForm="+$(this).val();$.ajax({type:"POST",url:"/src/App/default/controllers/ajax/getForm.php",data:a,cache:!1,success:function(a){$("#schedaContatto").html(a),initialize()}}).done(function(){$.each($("select"),function(){$(this).selectpicker("refresh")})})});var i=$("[data-toggle=collapse-side]"),e="."+i.attr("data-target"),o="."+i.attr("data-target-2");if(i.click(function(a){$(e).toggleClass("in"),$(o).toggleClass("out")}),$.each($(".caret"),function(){$(this).attr("class","fa fa-angle-down")}),0<$("#annunciUltimiSlider, #strutturaSocietariaSlider").length&&$("#annunciUltimiSlider, #strutturaSocietariaSlider").lightSlider({item:6,loop:!1,pager:!1,responsive:[{breakpoint:800,settings:{item:3}},{breakpoint:480,settings:{item:2}}]}),$(".checkbox-iscrizione-newsletter").change(function(){var a=$(this),t=a.val();$.ajax({url:baseUrlLingua+areaPrivataUrl+"/newsletter/iscrizione",method:"post",data:{iscrivi:a.is(":checked"),newsletter:t}}).success(function(a){})}),$(".iscrizione-gruppo").click(function(){var a=$(this),t=a.data("iscrivi"),i=a.data("gruppo");checkboxes=a.closest(".panel").find("input[type=checkbox]"),1==t?checkboxes.prop("checked",!0):checkboxes.removeProp("checked"),$.ajax({url:baseUrlLingua+areaPrivataUrl+"/newsletter/iscrizione-gruppo",method:"post",data:{iscrivi:t,gruppoNewsletter:i}}).success(function(a){})}),$("#formContattiCercoCasa").on("change","input[name=settore]",function(){var a="idTip="+$("input[name=settore]:checked").val();$.ajax({type:"POST",url:"/ajax/getTipologieSettore",data:a,cache:!1,success:function(a){$("#contAmbitoChange").html(a),$("#labelfc_tipologia").selectpicker("refresh")}})}),$("select#provincia").change(function(){var a=$(this).val();$.ajax({url:baseUrlLingua+areaPrivataUrl+"/profilo/carica-comuni",method:"post",dataType:"json",data:{provincia:a}}).success(function(a){var i=$("select#citta");i.find("option").first().text(aLang.scegliComune),i.find("option").slice(1).remove(),$.each(a,function(a,t){i.append('<option value="'+t.comuneId+'">'+t.comuneNome+"</option>")})})}),$(".visualizza-password").click(function(){var a=$(this),t=a.siblings("input"),i=t.attr("type"),e=a.children("i.fa");t.attr("type","password"==i?"text":"password"),e.toggleClass("fa-eye").toggleClass("fa-eye-slash")}),$("#ButtonAggiornaProfilo").click(function(){var a=$(this).closest("form");$("#formModificaProfilo").valid()&&$.ajax({url:baseUrlLingua+areaPrivataUrl+"/ajax/salvaModificaProfilo/",method:"post",data:a.serialize(),dataType:"json"}).success(function(a){200==a.response.status_code?$(".alert").addClass("alert-success").removeClass("alert-danger").text(aLang.alertProfiloAggiornato):$(".alert").removeClass("alert-success").addClass("alert-danger").text(a.response.message),$("#alertProfiloAggiornato").modal("show"),setTimeout(function(){$("#alertProfiloAggiornato").modal("hide")},2e3)})}),!checkCookie("alertComparso")&&"es"!=nazione){var n=setTimeout(function(){$("#salvaRicercaModal").modal("show")},2e4);$("#contentRiepilogo p").hide()}$("#salvaRicercaModal").on("hidden.bs.modal",function(){alertSalva&&$("#alertSalva").fadeIn(500)}),$("#salvaRicerca").on("click",function(){alertSalva=!1}),$("#alertSalva").on("click",function(){alertSalva=!0,$("#salvaRicercaModal").modal("show")}),$("#contentRiepilogo p").hide(),$("#modalRegistrati, #modalLogin").on("shown.bs.modal",function(){bloccaModalSalvaRicerca(n)}),$("#boxSearchArea").on("shown",function(){bloccaModalSalvaRicerca(n)});var r=$("#ricercaInput").attr("tipoRicerca");if("localita"==sRicercaModalita||"Cantieri"==r){var l=$("#ricercaTipo").val(),c=$("#ricercaNazione").val(),s=$("#ricercaKeyUrl").val(),d=$("#ricercaValore").val(),m=$("#ricercaTesto").val(),p=$("#ricercaCategoria").val(),u=$("#ricercaStringa").val(),f=$("#ricercaInput").val(),v=0;alert("entro"),$("#ricercaInput").autocomplete({autoFocus:!0,minLength:3,source:function(a,i){var t=$("#ricercaInput").val().replace("’","'");$.ajax({type:"post",url:baseUrlLingua+"ajax/ricerca"+r+"Autocomplete",dataType:"json",data:{ricercaTesto:t,ricercaCategoria:$("#ricercaCategoria").val(),ricercaContratto:$("#ricercaContratto").val()},success:function(a){if(a.length)i(a.slice(0,50));else{var t=[{label:$("#"+r.toLowerCase()+"NoResult").attr("msg"),value:i.term}];i(t)}}}),$(".imgImmobiliRicercaWait").css("display","block")},response:function(a,t){$(".imgImmobiliRicercaWait").hide()},close:function(a,t){1!=v?($("#ricercaTipo").val(l),$("#ricercaNazione").val(c),$("#ricercaKeyUrl").val(s),$("#ricercaValore").val(d),$("#ricercaTesto").val(m),$("#ricercaStringa").val(u),0==$("#ricercaInput").is(":focus")&&$("#ricercaInput").val(f),"Agenzie"==r&&$("#ricercaCategoria").val(p),v=0):($("#ricercaTipo").val(valRicercaTipo),$("#ricercaNazione").val(valRicercaNazione),$("#ricercaKeyUrl").val(valRicercaKeyUrl),$("#ricercaValore").val(valRicercaValore),$("#ricercaTesto").val(valRicercaTesto),$("#ricercaStringa").val(valRicercaStringa),0==$("#ricercaInput").is(":focus")&&$("#ricercaInput").val(f),"Agenzie"==r&&$("#ricercaCategoria").val(valRicercaCategoria))},select:function(a,t){if(void 0===t.item.data)return!1;aData=t.item.data.split("|"),$("#ricercaTipo").val(aData[0]),$("#ricercaNazione").val(aData[1]),$("#ricercaKeyUrl").val(aData[2]),$("#ricercaValore").val(aData[3]),$("#ricercaTesto").val(t.item.label),$("#ricercaStringa").val(t.item.data),$("#ricercaInput").val(t.item.label),"Agenzie"==r&&$("#ricercaCategoria").val(aData[4]),v=1,valRicercaTipo=aData[0],valRicercaNazione=aData[1],valRicercaKeyUrl=aData[2],valRicercaValore=aData[3],valRicercaTesto=t.item.label,valRicercaStringa=t.item.data,valRicercaInput=t.item.label,"Agenzie"==r&&(valRicercaCategoria=aData[4]),0==$(".immobilifiltroRicerca").length&&($("#ricercaButton").unbind("click"),$("#ricerca"+r).submit())},open:function(a,t){navigator.userAgent.match(/(iPod|iPhone|iPad)/)&&$(".ui-autocomplete").off("menufocus")},focus:function(a,t){return!1}}).autocomplete("instance")._renderItem=function(a,t){return $("<li>").append("<div class='ricercaLabel'>"+t.label+"</div><div class='ricercaDesc'>"+t.desc+"</div>").appendTo(a)},$(".listaRicercaInvio").on("keyup keypress keydown touchend",function(a){13===a.keyCode&&""!=$("#ricercaValore").val()&&($("#ricercaButton").unbind("click"),$("#ricerca"+r).submit())}),$(this).trigger("change"),$("#ricercaButton").on("click",function(){controlloPulsante=1,""!==$("#ricercaValore").val()&&(""==$("#ricercaInput").val()?($("#ricercaTipo").val(l),$("#ricercaNazione").val(c),$("#ricercaKeyUrl").val(s),$("#ricercaValore").val(d),$("#ricercaTesto").val(m),$("#ricercaStringa").val(u),$("#ricercaInput").val(f),"Agenzie"==r&&$("#ricercaCategoria").val(p)):$("#ricercaInput").val($("#ricercaTesto").val()),$("#ricercaButton").unbind("click"),$("#ricerca"+r).submit())}),$("#ricercaImmobili").submit(function(){$("#ricercaButton").unbind("click"),salvaRicercaRecente($(this).serialize())})}0!=utenteLogin&&setPercentualeProfilo(percentualeProfilo),$("#ButtonRegistrati").click(function(){$("#modalRegistrati").modal("show")}),setEtichettaPulsantePiuFiltri($(".piuFiltri")),$(".piuFiltri").click(function(){$(this).toggleClass("aperto"),setEtichettaPulsantePiuFiltri($(this))}),$("#salvaRicercaModal").on("shown.bs.modal",function(){$("#alertSalva").fadeOut(100),setCookie("alertComparso",!0,1);var t=$(this),a="lat="+t.find("input[name=lat]").val()+"&lng="+t.find("input[name=lng]").val()+"&raggio="+t.find("input[name=raggio]").val();"mappa"==t.find('input[name="ricercaTipo"]').val()&&$.ajax({type:"post",url:baseUrlLingua+"ajax/getImgMappa",data:a,success:function(a){t.find("#anteprimaMappa").attr("src",a)}})}),$(".visualizzaTelefono").click(function(a){nTelefono=$(this).attr("tel"),nAnnuncioId=$(this).attr("annuncio"),sTipo=$(this).attr("tipo"),$(".visualizzaTelefono").each(function(){$(this).html($(this).attr("tel")),$(this).removeClass("link"),$(this).unbind("click")}),$.post(baseUrlLingua+"ajax/salvaVisualizzaNumero",{tipo:sTipo,annuncioId:nAnnuncioId},function(a,t,i){})}),$(".bfh-selectbox").on("change.bfhselectbox",function(){var a=$(this).val();sUrl=$("link[hreflang='"+a+"']").attr("href"),""!=sUrl&&(location.href=sUrl)}),$(document).on("shown.bs.modal","#containerOLE",function(){$(".modal-backdrop").remove()}),$(".rinnova-alert").on("click",function(a){a.preventDefault(),idSalvaRicerca=$(this).data("ricerca"),$.ajax({url:"/ajax/rinnovaAlert",data:{idSalvaRicerca:idSalvaRicerca},success:function(a){location.reload()}})}),$(".schedaAnnuncioGalleriaImmagini a").not("[href=#Mappa]").on("click",function(){$("body").removeClass("mappa-attiva")}),$(".schedaAnnuncioGalleriaImmagini a[href=#Mappa]").on("click",function(){$("body").addClass("mappa-attiva")}),$(document).on("click",".js-open-filter",function(){$("<div id='containerFiltraTitolo'>"+aLang.modificaRicerca+" <span id='chiudimodificaFiltra' class='img-close'></span></div>").insertBefore(".immobilifiltroRicerca"),$("#containerRicercaJS").attr("style","display:block!important;position: fixed;position: -ms-device-fixed;top: 0;right: 0;z-index: 1050;width: 100%;height: 100%;background: #fff;display: none;-webkit-animation: open-up .2s;animation: open-up .2s;-webkit-animation-fill-mode: forwards;animation-fill-mode: forwards;;")}),$("#containerRicercaJS").on("click","#chiudimodificaFiltra",function(){$("#containerRicercaJS").removeAttr("style"),$("#containerFiltraTitolo").remove()}),location.href.includes("#form_richiestaConsulenza")&&espandiRichiestaConsulenza()}),$('button[data-toggle="tooltip"]').tooltip({animated:"fade",html:!0});var tipoVecchio,titoloVecchio,sideslider=$("[data-toggle=collapse-side]"),sel=sideslider.attr("data-target"),sel2=sideslider.attr("data-target-2");function aggiornaSottotipologie(a){$.ajax({type:"POST",url:"/ajax/getSottotipologie",data:{sTipologiaId:a},cache:!1,success:function(a){var t=$.parseJSON(a),i=$("#labelfc_sottotipologia");i.html('<option id="sottotipologiaSeleziona" value="">Seleziona il dettaglio</option>'),$.each(t,function(a,t){i.append('<option value="'+t.immobileSottoTipologiaId+'">'+t.immobileSottoTipologia+"</option>")}),i.selectpicker("refresh")}})}sideslider.click(function(a){$(sel).toggleClass("in"),$(sel2).toggleClass("out")}),$("#btnCheNePensi").on("click",function(){$(this).fadeOut(100),tipoVecchio=$("#tipo").val(),$(".onlyChenepensi").show(),$(".onlyRichieste").hide(),$("#pageUrl").val(location.href),$("#divContattiSegnalazioni").modal("show"),$("#tipo").val("cheNePensi")}),$("#divContattiSegnalazioni").on("hidden.bs.modal",function(){$(".onlyChenepensi").hide(),$(".onlyRichieste").show(),$("#tipo").val(tipoVecchio),$("#btnCheNePensi").fadeIn(100)}),$("button.navbar-toggle").on("click",function(){window.location.pathname.split("/")[1];$(".icon-bar").toggleClass("hidden"),$(this).toggleClass("img-close")}),$(document).click(function(a){var t=$(a.target);!0!==$(".navbar-collapse").hasClass("navbar-collapse in")||t.hasClass("navbar-toggle")||$("button.navbar-toggle").click()}),$("#formContattiCercoCasa").on("change","#labelfc_tipologia",function(){aggiornaSottotipologie($(this).val())});var windowWidth=$(window).width();768<windowWidth&&($(".immobiliListaAnnunci").on("mouseover",".immobiliListaAnnuncio",function(){var a=$(this).find(".carousel");$(this).data("timer",setInterval(function(){$(a).find(".carousel-control.right").trigger("click")},1e3))}),$(".immobiliListaAnnunci").on("mouseout",".immobiliListaAnnuncio",function(){window.clearInterval($(this).data("timer"))}));